extends layout-default.pug

block body
  body
    .page-container
      //- Top Toolbar
      header.top-toolbar
        .toolbar-content
          a.toolbar-brand(href='#') MediaLib

          .search-container
            span.search-icon ðŸ”
            input.search-input(
              name='search'
              type='search'
              placeholder='Search media...'
              aria-label='Search'
              hx-get="/library"
              hx-trigger="input delay:1s"
              hx-target=".main-content"
              hx-select=".media-list"
            )

          nav
            ul.nav-menu#navMenu
              li
                a(href='/') Home
              li
                a(href='/library') Library
              li
                a(href='/favorites') Favorites
              li
                a(href='/settings') Settings

          button.menu-toggle#menuToggle(
            aria-label='Toggle menu'
            aria-expanded='false'
          ) â˜°

      //- Main Content
      main.main-content(
        hx-get="/library"
        hx-trigger="load"
        hx-select=".media-list"
        hx-select-oob="#bottom-toolbar")

      //- Bottom Toolbar
      footer#bottom-toolbar
        p Disconnected

    script.
      // Mobile menu toggle functionality
      const menuToggle = document.getElementById('menuToggle');
      const navMenu = document.getElementById('navMenu');

      menuToggle.addEventListener('click', function() {
        navMenu.classList.toggle('open');
        const isOpen = navMenu.classList.contains('open');
        menuToggle.setAttribute('aria-expanded', isOpen);
        menuToggle.textContent = isOpen ? 'âœ•' : 'â˜°';
      });

      // Close menu when clicking outside
      document.addEventListener('click', function(event) {
        const isClickInsideMenu = navMenu.contains(event.target);
        const isClickOnToggle = menuToggle.contains(event.target);

        if (!isClickInsideMenu && !isClickOnToggle && navMenu.classList.contains('open')) {
          navMenu.classList.remove('open');
          menuToggle.setAttribute('aria-expanded', 'false');
          menuToggle.textContent = 'â˜°';
        }
      });

      // Handle bottom toolbar active state
      const toolbarActions = document.querySelectorAll('.toolbar-action');
      toolbarActions.forEach(action => {
        action.addEventListener('click', function(e) {
          e.preventDefault();
          toolbarActions.forEach(a => a.classList.remove('active'));
          this.classList.add('active');
        });
      });
